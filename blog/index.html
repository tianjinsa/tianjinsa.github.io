<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Tianjinsaçš„åšå®¢ - åˆ†äº«æŠ€æœ¯æ–‡ç« å’Œä¸ªäººå¿ƒå¾—">
    <meta name="keywords" content="Tianjinsa, åšå®¢, æŠ€æœ¯åˆ†äº«, å¼€å‘ç¬”è®°">
    <meta name="author" content="Tianjinsa">
    <!-- ç½‘ç«™å›¾æ ‡ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“</text></svg>">
    <!-- ç¤¾äº¤åª’ä½“é¢„è§ˆ -->
    <meta property="og:title" content="Tianjinsaçš„åšå®¢">
    <meta property="og:description" content="æŠ€æœ¯åˆ†äº«å’Œä¸ªäººå¿ƒå¾—">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tianjinsa.github.io/blog/">
    <title>Tianjinsaçš„åšå®¢</title>
    <!-- å¼•å…¥æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="../styles.css">
    <style>
        .blog-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: #282828;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }
        
        .blog-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .blog-header h1 {
            margin-bottom: 10px;
        }
        
        .blog-header p {
            color: #b0b0b0;
            font-size: 1.1em;
        }
        
        .blog-list {
            list-style: none;
            padding: 0;
        }
        
        .blog-item {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 1px solid #444444;
        }
        
        .blog-item:last-child {
            border-bottom: none;
        }
        
        .blog-title {
            font-size: 1.8em;
            margin-bottom: 10px;
        }
        
        .blog-title a {
            color: #ffffff;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .blog-title a:hover {
            color: #87ceeb;
        }
        
        .blog-date {
            font-size: 0.9em;
            color: #888888;
            margin-bottom: 15px;
            display: block;
        }
        
        .blog-excerpt {
            color: #b0b0b0;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .read-more {
            display: inline-block;
            color: #87ceeb;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .read-more:hover {
            color: #ffffff;
            transform: translateX(5px);
        }
        
        .no-blogs {
            text-align: center;
            padding: 50px 0;
            color: #888888;
        }
        
        .home-link {
            display: block;
            text-align: center;
            margin-top: 40px;
            color: #87ceeb;
            text-decoration: none;
        }
        
        .home-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="blog-container">
        <div class="blog-header">
            <h1>Tianjinsaçš„åšå®¢</h1>
            <p>åˆ†äº«æŠ€æœ¯æ–‡ç« å’Œä¸ªäººå¿ƒå¾—</p>
        </div>
        
        <div id="blog-content">
            <!-- åšå®¢åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            <div class="no-blogs">
                <p>æ­£åœ¨åŠ è½½åšå®¢å†…å®¹...</p>
            </div>
        </div>
        
        <a href="../index.html" class="home-link">è¿”å›ä¸»é¡µ</a>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const blogContentEl = document.getElementById('blog-content');
            const repoOwner = 'tianjinsa';
            const repoName = 'tianjinsa.github.io';
            const blogPath = 'blog';
            
            // ä»GitHubè·å–åšå®¢æ–‡ä»¶åˆ—è¡¨
            fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${blogPath}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('è·å–åšå®¢åˆ—è¡¨å¤±è´¥');
                    }
                    return response.json();
                })
                .then(files => {
                    // è¿‡æ»¤å‡º.mdæ–‡ä»¶å¹¶æŒ‰æ—¥æœŸæ’åº
                    const blogFiles = files
                        .filter(file => file.name.endsWith('.md'))
                        .sort((a, b) => {
                            // å‡è®¾æ–‡ä»¶åæ ¼å¼ä¸º: YYYY-MM-DD-title.md
                            const dateA = a.name.substring(0, 10);
                            const dateB = b.name.substring(0, 10);
                            return dateB.localeCompare(dateA); // é™åºæ’åˆ—
                        });
                    
                    if (blogFiles.length === 0) {
                        blogContentEl.innerHTML = `
                            <div class="no-blogs">
                                <p>æš‚æ— åšå®¢æ–‡ç« </p>
                            </div>
                        `;
                        return;
                    }
                    
                    // åˆ›å»ºåšå®¢åˆ—è¡¨
                    let blogListHTML = '<ul class="blog-list">';
                    
                    // å¤„ç†æ¯ä¸ªåšå®¢æ–‡ä»¶
                    const fetchPromises = blogFiles.map(file => {
                        return fetch(file.download_url)
                            .then(response => response.text())
                            .then(content => {
                                // è§£æfrontmatterå’Œå†…å®¹
                                const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---\n/);
                                let title = file.name.replace(/^\d{4}-\d{2}-\d{2}-/, '').replace('.md', '');
                                let date = file.name.substring(0, 10);
                                let excerpt = '';
                                
                                if (frontmatterMatch) {
                                    const frontmatter = frontmatterMatch[1];
                                    const titleMatch = frontmatter.match(/title:\s*"(.+?)"/);
                                    const dateMatch = frontmatter.match(/date:\s*"(.+?)"/);
                                    
                                    if (titleMatch) title = titleMatch[1];
                                    if (dateMatch) {
                                        const dateObj = new Date(dateMatch[1]);
                                        date = dateObj.toLocaleDateString('zh-CN', {
                                            year: 'numeric',
                                            month: 'long',
                                            day: 'numeric'
                                        });
                                    }
                                    
                                    // æå–æ­£æ–‡çš„å‰150ä¸ªå­—ç¬¦ä½œä¸ºæ‘˜è¦
                                    const mainContent = content.replace(frontmatterMatch[0], '').trim();
                                    excerpt = mainContent.substring(0, 150) + (mainContent.length > 150 ? '...' : '');
                                }
                                
                                // åˆ›å»ºåšå®¢é“¾æ¥é¡µé¢åœ°å€ï¼Œä½¿ç”¨æ–‡ä»¶åä½œä¸ºé“¾æ¥
                                const blogUrl = `./posts/${file.name.replace('.md', '.html')}`;
                                
                                // è¿”å›HTMLç‰‡æ®µ
                                return `
                                    <li class="blog-item">
                                        <h2 class="blog-title">
                                            <a href="${blogUrl}">${title}</a>
                                        </h2>
                                        <span class="blog-date">${date}</span>
                                        <p class="blog-excerpt">${excerpt}</p>
                                        <a href="${blogUrl}" class="read-more">é˜…è¯»å…¨æ–‡ â†’</a>
                                    </li>
                                `;
                            })
                            .catch(error => {
                                console.error(`åŠ è½½åšå®¢ ${file.name} å¤±è´¥:`, error);
                                return `
                                    <li class="blog-item">
                                        <h2 class="blog-title">${file.name}</h2>
                                        <p class="blog-excerpt">åŠ è½½åšå®¢å†…å®¹å¤±è´¥</p>
                                    </li>
                                `;
                            });
                    });
                    
                    // å¤„ç†æ‰€æœ‰åšå®¢å†…å®¹åŠ è½½å®Œæˆåçš„æ“ä½œ
                    Promise.all(fetchPromises)
                        .then(blogItems => {
                            blogListHTML += blogItems.join('') + '</ul>';
                            blogContentEl.innerHTML = blogListHTML;
                        })
                        .catch(error => {
                            console.error('åŠ è½½åšå®¢å†…å®¹å¤±è´¥:', error);
                            blogContentEl.innerHTML = `
                                <div class="no-blogs">
                                    <p>åŠ è½½åšå®¢å†…å®¹å‡ºé”™</p>
                                </div>
                            `;
                        });
                })
                .catch(error => {
                    console.error('è·å–åšå®¢åˆ—è¡¨å¤±è´¥:', error);
                    blogContentEl.innerHTML = `
                        <div class="no-blogs">
                            <p>è·å–åšå®¢åˆ—è¡¨å¤±è´¥: ${error.message}</p>
                        </div>
                    `;
                });
        });
    </script>
</body>
</html>
